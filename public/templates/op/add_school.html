<div class="panel panel-default">
  <div class="panel-heading">创建学校</div>
  <div class="panel-body">
    <form class="form-horizontal row" role="form" name="newSchoolForm">

      <div class="form-group">
        <label for="school-id" class="col-sm-2 control-label">学校编号</label>

        <div class="col-sm-8">
          <input id="school-id" type="number" ng-model="school.school_id" name="id"
                 class="editing-field form-control" ng-bk-focus required
                 ng-change="isSchoolIdDuplicated(school.school_id, newSchoolForm.id);idChange(school)"/>
          <span class="error-field" ng-show="newSchoolForm.id.$dirty && newSchoolForm.id.$error.unique"><i
            class="glyphicon glyphicon-info-sign"></i>与已有学校ID重复！</span>
        </div>
      </div>

      <div class="form-group">
        <label for="school-full-name" class="col-sm-2 control-label">学校全称</label>

        <div class="col-sm-8">
          <input id="school-full-name" type="text" ng-model="school.full_name" name="fullName"
                 class="editing-field form-control" placeholder="供超级后台管理员区分学校用,不会显示在客户端"
                 ng-change="isSchoolDuplicated(school, 'full_name', newSchoolForm.fullName)" required/>
          <span class="error-field" ng-show="newSchoolForm.fullName.$dirty && newSchoolForm.fullName.$error.unique"><i
            class="glyphicon glyphicon-info-sign"></i>与已有学校全称重复！</span>
        </div>
      </div>

      <div class="form-group">
        <label for="school-name" class="col-sm-2 control-label">学校名称(手机端显示)</label>

        <div class="col-sm-8">
          <input id="school-name" type="text" ng-model="school.name" name="name"
                 class="editing-field form-control" placeholder="显示在客户端的学校名称,不能超过8个汉字" required maxlength="8"/>
          <span class="error-field" ng-show="newSchoolForm.name.$dirty && newSchoolForm.name.$error.maxlength"><i
            class="glyphicon glyphicon-info-sign"></i>学校显示名称不能超过8个字符</span>
        </div>
      </div>


      <div class="form-group">
        <label for="school-cell-phone" class="col-sm-2 control-label">校长手机号</label>

        <div class="col-sm-8">
          <input id="school-cell-phone" type="text" ng-model="school.principal.phone" name="phone"
                 class="editing-field form-control" placeholder="11位数字手机号,不能与现有老师的手机重复" required ng-pattern="/^\d{11}$/"
                 maxlength="11"/>
          <span class="error-field" ng-show="newSchoolForm.phone.$dirty && newSchoolForm.phone.$error.pattern"><i
            class="glyphicon glyphicon-info-sign"></i>错误的手机号码，应该是11位数字</span>
        </div>
      </div>

      <div class="form-group">
        <label for="school-fix-line-phone" class="col-sm-2 control-label">学校座机号</label>

        <div class="col-sm-8">
          <input id="school-fix-line-phone" type="text" ng-model="school.phone" name="fixLine"
                 class="editing-field form-control" placeholder="座机或手机(可选)" ng-pattern="/^(\d{11}|0\d{2,3}\-\d{7,8})$/"
                 maxlength="13"/>
          <span class="error-field" ng-show="newSchoolForm.fixLine.$dirty && newSchoolForm.fixLine.$error.pattern"><i
            class="glyphicon glyphicon-info-sign"></i>电话号码格式错误，区号和号码'-'分隔，如: 请用座机010-88886666或者手机格式1398886666</span>
        </div>
      </div>

      <div class="form-group">
        <label for="school-token" class="col-sm-2 control-label">验证码</label>

        <div class="col-sm-8">
          <input id="school-token" type="text" ng-model="school.token" name="token"
                 class="editing-field form-control" placeholder="与安全后台对接专用验证码,建议妥善管理,避免重复" required/>
        </div>
      </div>

      <div class="form-group">
        <label for="admin-name" class="col-sm-2 control-label">校长登录名</label>

        <div class="col-sm-8">
          <input id="admin-name" type="text" ng-model="school.principal.admin_login" name="adminLogin"
                 class="editing-field form-control" required ng-pattern="/^\w{3,16}$/"/>
          <span class="error-field"
                ng-show="newSchoolForm.adminLogin.$dirty && newSchoolForm.adminLogin.$error.pattern"><i
            class="glyphicon glyphicon-info-sign"></i>登录名只能由3到16位数字和字母组成，不能包含特殊字符或者中文。</span>
        </div>
      </div>
      <div class="form-group">
        <label for="admin-password" class="col-sm-2 control-label">密码</label>

        <div class="col-sm-8">
          <input id="admin-password" type="password" ng-model="school.principal.admin_password" name="adminPassword"
                 class="editing-field form-control" ng-minlength="6" required/>
          <span class="error-field"
                ng-show="newSchoolForm.adminPassword.$dirty && newSchoolForm.adminPassword.$error.required"><i
            class="glyphicon glyphicon-info-sign"></i>请给出登陆密码</span>
          <span class="error-field"
                ng-show="newSchoolForm.adminPassword.$dirty && newSchoolForm.adminPassword.$error.minlength"><i
            class="glyphicon glyphicon-info-sign"></i>密码至少6位</span>
        </div>
      </div>
      <div class="form-group">
        <label for="admin-password-confirm" class="col-sm-2 control-label">重复密码</label>

        <div class="col-sm-8">
          <input id="admin-password-confirm" type="password" ng-model="school.principal.admin_password_confirm"
                 name="adminPasswordConfirm"
                 class="editing-field form-control" ng-minlength="6" required/>
          <span class="error-field"
                ng-show="newSchoolForm.adminPasswordConfirm.$dirty && school.principal.admin_password != school.principal.admin_password_confirm"><i
            class="glyphicon glyphicon-info-sign"></i>两次输入不一致。</span>
          <span class="error-field"
                ng-show="newSchoolForm.adminPasswordConfirm.$dirty && newSchoolForm.adminPasswordConfirm.$error.required"><i
            class="glyphicon glyphicon-info-sign"></i>请再次填写密码</span>
        </div>
      </div>

      <div class="form-group">
        <label for="expire-date" class="col-sm-2 control-label">过期时间</label>

        <div class="col-sm-8">
          <input id="expire-date" type="date" ng-model="school.charge.expire" name="expireDate"
                 class="editing-field form-control" required/>
        </div>
      </div>


      <div class="form-group">
        <label for="total_number" class="col-sm-2 control-label">授权账号个数</label>

        <div class="col-sm-8">
          <input id="total_number" type="number" ng-model="school.charge.total_phone_number" name="total_phone_number"
                 class="editing-field form-control" required/>
        </div>
      </div>

      <div class="form-group">
        <label for="address" class="col-sm-2 control-label">学校地址</label>

        <div class="col-sm-8">
          <input id="address" select-address p="p" c="c" a="a" d="d" ng-model="school.address" placeholder="请选择所在地" type="text" class="form-control" />
        </div>
      </div>


      <div class="panel-footer">
        <div class="form-group row">
        <a class="btn btn-warning adding-button col-sm-offset-9 col-sm-1"
           ng-disabled="newSchoolForm.$invalid || school.admin_password != school.admin_password_confirm"
           ng-click="saveSchool(school)">保存</a>
        <a class="btn btn-default adding-button col-sm-1"
           ng-click="$hide()">取消</a>
          </div>
      </div>
    </form>
  </div>
</div>


