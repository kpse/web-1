<div class="loading" ng-show="loading"/>
<h3>与{{child.name}}的家长的通讯记录</h3>
<form class="form well">
  <textarea ng-bk-focus class="message-input" type="text" ng-model="message.content" placeholder="要发送的内容.." required/>
  <div class="clearfix"></div>
  <button ng-click="send(message)" class="btn btn-primary" ng-disabled="!message.content">快速回复</button>
  <button ng-click="messageEditing(message)" class="btn btn-success">回复图片</button>
</form>

<div class="chat-history longer-history"><table class="table table-hover table-condensed">
  <thead>
  <tr class="row">
    <th class=".col-xs-2">发言人</th>
    <th class=".col-xs-5">通讯内容</th>
    <th class=".col-xs-4">图片</th>
    <th class=".col-xs-1">通讯时间</th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="c in conversations | filter: searchText | orderBy:'id':true " class="row" ng-click="preview(c)" ng-class="{editable: preview}">
    <td class=".col-xs-2">{{c.sender.id}}</td>
    <td class=".col-xs-5">{{c.content.substring(0,100)}}{{(c.content.length > 100) ? '...' : ''}}</td>
    <th class=".col-xs-4">
      <div class="image-preview">
        <img class="conversation-image img-responsive" ng-src="{{c.media.url}}"
             alt="图片"/>
      </div>
    </th>
    <td class=".col-xs-1">于{{c.timestamp | date:'yyyy年MM月dd日 HH:mm'}}收到</td>
  </tr>
  </tbody>
</table>
</div>