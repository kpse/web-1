<div class="loading" ng-show="loading"></div>
<h3>与{{child.name}}的家长的通讯记录</h3>
<form class="form well">
    <textarea ng-bk-focus class="message-input" type="text" ng-model="message.content" placeholder="要发送的内容.." required></textarea>
    <div class="clearfix"></div>
    <button ng-click="send(message)" class="btn btn-primary" ng-disabled="!message.content">快速回复</button>
    <button ng-click="messageEditing(message)" class="btn btn-success">详细回复</button>
</form>

<div class="chat-history longer-history"><table class="table table-hover table-condensed">
  <thead>
  <tr class="row">
    <th class="col-xs-1">发言人</th>
    <th class="col-xs-5">通讯内容</th>
    <th class="col-xs-5">图片</th>
    <th class="col-xs-1">通讯时间</th>
  </tr>
  </thead>
  <tbody>
  <tr ng-repeat="c in conversations | filter: searchText | orderBy:'id':true " class="row" ng-click="preview(c)" ng-class="{editable: preview}">
    <td class="col-xs-1">{{c.sender.name}}</td>
    <td class="col-xs-5" ng-show="c.content">{{c.content.substring(0,100)}}{{(c.content.length > 100) ? '...' : ''}}</td>
    <td class="col-xs-5" ng-show="!c.content">N/A</td>

    <th class="col-xs-5" ng-show="c.media.url">
      <div class="image-preview image-110">
        <div kl-media-preview media="c.media" height="110"></div>
      </div>
    </th>
    <td class="col-xs-5" ng-show="!c.media.url">N/A</td>
    <td class="col-xs-1">于{{c.timestamp | date:'yyyy年MM月dd日 HH:mm'}}收到</td>
  </tr>
  </tbody>
</table>
</div>