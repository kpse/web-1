<div class="loading" ng-show="loading"></div>
<div class="panel panel-default">
  <form class="form-horizontal assignment-form" role="form" name="assignmentForm">

    <div class="panel-body">
      <div class="col-sm-7">
        <div class="form-group">
          <label for="title" class="col-sm-4 control-label">作业标题</label>

          <div class="col-sm-8">
            <input id="title" name="title" ng-model="assignment.title" class="form-control" ng-maxlength="15"
                   placeholder="添加标题" required/>
      <span class="error-field"
            ng-show="assignmentForm.title.$dirty && assignmentForm.title.$error.required">请填写标题</span>
            <span class="error-field" ng-show="assignmentForm.title.$dirty && assignmentForm.title.$error.maxlength">标题请不要超过15个字符</span>
          </div>
        </div>
      </div>
      <div class="col-sm-5">
        <div class="form-group">
          <label for="child-class" class="col-sm-4 control-label">班级</label>

          <div class="col-sm-8">
            <select class="form-control class-select" ng-model="assignment.class_id"
                    ng-options="value.class_id as value.name for (key, value) in kindergarten.classes"
                    data-style="btn-primary" required></select>
          </div>
        </div>
      </div>
      <div class="col-sm-12">
        <div class="form-group">
          <label for="content" class="control-label">作业内容</label>
          <br/>
          <small ng-show="assignment.content.length >= 0">还可以输入{{ 500 - assignment.content.length}}个字</small>
          <span class="error-field" ng-show="assignmentForm.content.$dirty && assignmentForm.content.$error.required">请填写正文内容</span>
          <span class="error-field" ng-show="assignmentForm.content.$dirty && assignmentForm.content.$error.maxlength">正文内容请不要超过500个字符</span>
          <textarea id="content" name="content" ng-model="assignment.content" class="editing-content form-control"
                    ng-maxlength="500"
                    placeholder="添加内容" required/>

        </div>
      </div>
      <div class="form-group col-sm-7">
        <div class="image-container">
          <img class="assignment-image" ng-src="{{assignment.icon_url}}"
               alt="亲子作业图片"/></div>
      </div>
      <div class="form-group col-sm-5">
        <kl-file-upload ng-model="assignment" user="adminUser.id" label="buttonLabel"
                        field-name="icon_url"></kl-file-upload>
      </div>
    </div>
    <div class="clearfix"></div>
    <div class="panel-footer">
      <div ng-show="assignment.timestamp" class="issue-date">最后修改于：{{assignment.timestamp | date:'yyyy年MM月dd日'}}
      </div>
      <div class="btn-group">
        <button class="btn btn-default" ng-click="$hide()">取消</button>
        <button class="btn btn-info" ng-disabled="assignmentForm.$invalid || uploading" ng-click="save(assignment)">保存</button>
      </div>
    </div>
  </form>
</div>
</form>
